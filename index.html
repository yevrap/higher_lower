<!DOCTYPE html>
<html>
<head>
<script>

var CardDeck = {
    deck: getCardList(5),
    nextCard: function() {return this.deck.pop();}

};

function guess(buttonId) {
    

    var card1 = document.getElementById("card1");
    
    var card2 = getRandomInt(10);

    switch(buttonId) {
        case "higher":
            if (parseInt(card1.innerHTML, 10) < card2) {
                score();
            break;
            }
        case "lower":
            if (parseInt(card1.innerHTML, 10) > card2) {
                score();
            break;
            }
        case "equal":
            if (parseInt(card1.innerHTML, 10) === card2) {
                score();
            break;
            }
    }
    var divContent = document.getElementById("guesses");
    var countElements = divContent.childElementCount;

    if(countElements < 5) {
        var newP = document.createElement("p");
        var pContent = document.createTextNode("X");
        newP.appendChild(pContent);

        divContent.appendChild(newP);

        card1.innerHTML = card2;
    } else {
        var loseH = document.createElement("h3");
        var hContent = document.createTextNode("GAME OVER");
        loseH.appendChild(hContent);

        divContent.appendChild(loseH);
    }
}

function start() {
    var startButton = document.getElementById("start");
    startButton.style.display = "none"

    var lowerButton = document.getElementById("lower");
    var higherButton = document.getElementById("higher");
    var equalButton = document.getElementById("equal");

    lowerButton.style.display = "initial"
    higherButton.style.display = "initial"
    equalButton.style.display = "initial"

    var card1 = document.getElementById("card1");
    card1.innerHTML = CardDeck.nextCard();
}

function score() {
    var score = document.getElementById("score");
    score.innerHTML = parseInt(score.innerHTML, 10) + 1;
}

function getCardList(size) {
    var randomCardList = shuffle([...Array(size).keys()]);

    return randomCardList;
}

function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}

</script>

</head>
<body>
<h1>Higher or Lower?</h1>
<div id="guesses">
<p id="card1"></p>
</div>
<button type="button" id="start" onclick="start()"> Start </button>
<button hidden type="button" id="higher" onclick="guess(this.id)"> Higher </button>
<button hidden type="button" id="lower" onclick="guess(this.id)"> Lower </button>
<button hidden type="button" id="equal" onclick="guess(this.id)"> Equal </button>
<h2> Score: <span id="score"> 0 </span> </h2>
</body>
</html>
